<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Improving Game Performance On the Web</title>
    <link href='http://fonts.googleapis.com/css?family=Fira+Sans' rel='stylesheet'/>
    <link rel="stylesheet" href="../reveal.js-2.6.2/css/reveal.min.css"/>
    <link rel="stylesheet" href="../reveal.js-2.6.2/css/theme/fxos.css" id="theme"/>
    <link rel="stylesheet" href="../reveal.js-2.6.2/lib/css/zenburn.css"/>
    <link rel="stylesheet" href="../mozilla-tabzilla/css/tabzilla.css" media="screen" />
    <style>
      #dino {
        position: fixed;
        bottom: 10px;
        left: 10px;
        width: 5%;
        min-width: 50px;
        z-index: 30;
      }
      .reveal p, .reveal small, .reveal li {
        font-style: italic;
      }
    </style>
  </head>
  <body>
  <img id="dino" src="dino.svg" alt="Mozilla Dino Head Logo"/>
  <div id="tabzilla">
    <a href="https://www.mozilla.org/">Mozilla</a>
  </div>
    <div class="reveal">
      <div class="slides">
        <section>
          <h1>Improving Game</h1>
          <h1>Performance on the Web</h1>
          <small>Nick Desaulniers - <a href="https://twitter.com/LostOracle">@LostOracle</a></small>
        </section>
        <section data-background="huge_vr.jpg">
          <section>
            <h2>Web VR</h2>
            <p>Experience the Web in a whole new way</p>
          </section>
          <section>
            <h2>Time to render a single frame</h2>
            <h2>60 Hz === 16.6 ms</h2>
            <h2>90 Hz === 11 ms</h2>
            <p class="fragment">oh, and you have to render everything twice</p>
            <p class="fragment">from two different viewpoints</p>
          </section>
        </section>
        <section>
          <h2>Web Assembly</h2>
          <p>Minimize load times</p>
        </section>
        <section>
          <h2>Concurrency vs Parallelism</h2>
          <p class="fragment">Interruptible? Concurrent</p>
          <p class="fragment">Independant? Parallel</p>
          <p class="fragment">Not mutually exclusive, could have both, either, neither</p>
          JavaScript's single threaded event loop is great for IO bound workloads.
          Highly concurrent, but we're not utilizing additional resources that we could be.
        </section>
        <section>
          <h2>Synchronization</h2>
        </section>
        <section>
          <section>
            <h2>SharredArrayBuffer</h2>
            <p>Workers can share read/write access to a TypedArray instead of postMessage</p>
          </section>
          <section>
            <img src="cplusplus.png" alt="danger" style="height: 600px;"/>
          </section>
          <section>
            <h2>Problems with shared memory</h2>
            <p>Shared memory can lead to</p>
            <ul>
              <li>Data Race Conditions</li>
              <li>Deadlock</li>
            </ul>
          </section>
          <section>
            <img src="thistall.jpg" alt="You must be this tall to write multithreaded code">
          </section>
          <section>
            <p>SharedArrayBuffer gives us synchronization primitives to help</p>
            <ul>
              <li>&quot;Futexes&quot;</li>
              <li>Atomics</li>
            </ul>
          </section>
          <section>
            <p>From there, we can build:</p>
            <ul>
              <li>Mutexes</li>
              <li>Condition Variables</li>
              <li>Semaphores</li>
              <li>Spin Locks</li>
            </ul>
          </section>
          <section>
            <h2>Mutex.js?</h2>
          </section>
          <section>
            <img src="reaper2.gif" alt="Grim Reaper"/>
          </section>
          <section>
            <p>Prefer task level parallelism (postMessage) to data level parallelism (SharedArrayBuffer)</p>
          </section>
        </section>
        <section>
          <h2>WebGL 2</h2>
          <p>Minimize CPU &lt;-&gt; GPU synchronization</p>
        </section>
        <section>
          <section>
            <h2>SIMD</h2>
            <p>Increased parallelism with no synchronization</p>
          </section>
          <section>
            <p>Working on implementing SIMD optimizations to gl-matrix</p>
            <ul>
              <li>
                <a href="https://github.com/toji/gl-matrix/issues/171">#171</a>
              </li>
              <li>
                <a href="https://github.com/toji/gl-matrix/pull/172">#172</a>
              </li>
            </ul>
          </section>
        </section>
        <section>
          <section>
            <h2>WebGL in Workers</h2>
            <p>Stay off the main thread</p>
          </section>
          <section>
            <h2>Prediction</h2>
            <p>We'll begin to see more and more work being pushed off of the main thread</p>
          </section>
        </section>
      </div>
    </div>
    <script src="../reveal.js-2.6.2/lib/js/head.min.js"></script>
    <script src="../reveal.js-2.6.2/js/reveal.js"></script>
    <script>
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        dependencies: [
           { src: '../reveal.js-2.6.2/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
        ],
      });
    </script>
  </body>
</html>

